{% extends "base.html" %}

{% block title %}HTTP Status Code Tester{% endblock %}

{% block extra_head %}
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet"
      id="prism-dark-theme"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet"
      id="prism-light-theme" disabled/>
<link href="{{ url_for('static', filename='css/httpcodes-styles.css') }}" rel="stylesheet">
{% endblock %}

{% block content %}
<div class="httpcodes-container">
    <div class="max-width-container">
        <h1 class="page-title">HTTP Status Code Tester API</h1>
        <p class="page-description">
            This endpoint allows you to test and simulate different HTTP status codes.
            It supports multiple HTTP methods and provides useful diagnostic information
            about the request, response, and headers.
        </p>

        <div class="card">
            <h2 class="card-title">🔍 Endpoint</h2>
            <pre class="code-block"><code>/httpcode/&lt;int:code&gt;</code></pre>
            <p class="hint-text">Example: <code class="inline-code">/httpcode/404</code> returns a 404 Not Found
                response.</p>
        </div>

        <!-- Common Endpoint Links -->
        <div class="card">
            <h2 class="card-title">🌐 Common Endpoint Links</h2>
            <p class="hint-text">Click any copy icon to copy the full endpoint URL.</p>

            <div class="endpoint-grid">
                {% set status_codes = [200, 201, 204, 301, 302, 304, 400, 401, 403, 404, 405, 422, 429, 500, 502, 503,
                504] %}
                {% for code in status_codes %}
                <div class="endpoint-item">
                    <code class="inline-code">/httpcode/{{ code }}</code>
                    <button class="copy-btn" data-url="/httpcode/{{ code }}">📋</button>
                </div>
                {% endfor %}
            </div>
        </div>

        <div class="card">
            <h2 class="card-title">🧠 Function Description</h2>
            <p class="card-text">
                This route takes an integer <code class="inline-code">&lt;code&gt;</code> between
                <strong>100</strong> and <strong>599</strong> representing an HTTP status code.
                It returns a JSON response describing the code and request details.
            </p>
            <p class="card-text">Invalid status codes return <code class="error-code">400 Bad Request</code>.</p>
        </div>

        <div class="card">
            <h2 class="card-title">📋 Example Response</h2>
            <pre class="language-json"><code>{
  "status": 200,
  "message": "OK",
  "method": "GET",
  "path": "/httpcode/200",
  "timestamp": "2025-10-19T13:20:32Z"
}</code></pre>
        </div>

        <div class="card">
            <h2 class="card-title">📦 Example with Request Body (POST)</h2>
            <pre class="language-bash"><code>curl -X POST -H "Content-Type: application/json" \
-d '{"name": "Test"}' {{ request.host_url }}httpcode/201</code></pre>
            <pre class="language-json"><code>{
  "status": 201,
  "message": "Created",
  "method": "POST",
  "path": "/httpcode/201",
  "timestamp": "2025-10-19T13:21:10Z",
  "received_data": {
    "name": "Test"
  }
}</code></pre>
        </div>

        <div class="card">
            <h2 class="card-title">🧩 Special Behaviors</h2>
            <ul class="special-list">
                <li><code>204</code> → Returns an empty response (No Content)</li>
                <li><code>301 / 302 / 307 / 308</code> → Adds a <code>Location: /</code> header</li>
                <li><code>401</code> → Includes <code>WWW-Authenticate</code> header</li>
                <li><code>429</code> → Includes <code>Retry-After: 60</code> header</li>
                <li><code>503</code> → Includes <code>Retry-After: 120</code> header</li>
            </ul>
        </div>

        <div class="card">
            <h2 class="card-title">💡 Try it Live!</h2>
            <div class="test-controls">
                <input type="number" id="statusCode" min="100" max="599" value="200" class="status-input">
                <select id="httpMethod" class="method-select">
                    <option value="GET">GET</option>
                    <option value="POST">POST</option>
                    <option value="PUT">PUT</option>
                    <option value="DELETE">DELETE</option>
                    <option value="PATCH">PATCH</option>
                </select>
                <button onclick="testHttpCode()" class="test-button">Test Now</button>
            </div>
            <div id="testResult" class="test-result" style="display:none;"></div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
<script src="{{ url_for('static', filename='js/httpcodes.js') }}"></script>
{% endblock %}