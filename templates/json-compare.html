{% extends "base.html" %}

{% block title %}JSON Comparison Tool{% endblock %}

{% block header_left %}
<button class="back-to-menu" onclick="window.location.href='/menu'" title="Back to Dashboard">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2">
        <polyline points="15 18 9 12 15 6"></polyline>
    </svg>
    Menu
</button>
{% endblock %}

{% block extra_head %}
<link href="{{ url_for('static', filename='css/json-compare-styles.css') }}" rel="stylesheet">
{% endblock %}

{% block content %}
<div class="json-compare-container">
    <div class="page-header">
        <p class="page-description">Compare two JSON objects and visualize their differences</p>
    </div>

    <div class="controls">
        <button class="btn-primary" onclick="compareJSON()">Compare</button>
        <button class="btn-secondary" onclick="formatJSON()">Format JSON</button>
        <button class="btn-secondary" onclick="clearAll()">Clear All</button>
        <button class="btn-success" onclick="loadSample()">Load Sample</button>
    </div>

    <div class="legend">
        <div class="legend-item">
            <div class="legend-box" style="background: #d4edda; border-color: #28a745;"></div>
            <span>Added</span>
        </div>
        <div class="legend-item">
            <div class="legend-box" style="background: #f8d7da; border-color: #dc3545;"></div>
            <span>Removed</span>
        </div>
        <div class="legend-item">
            <div class="legend-box" style="background: #fff3cd; border-color: #ffc107;"></div>
            <span>Changed</span>
        </div>
    </div>

    <div class="comparison-area">
        <div class="json-panel">
            <div class="panel-header">JSON 1</div>
            <div class="json-editor" id="json1" contenteditable="true"></div>
        </div>
        <div class="json-panel">
            <div class="panel-header">JSON 2</div>
            <div class="json-editor" id="json2" contenteditable="true"></div>
        </div>
    </div>

    <div class="results" id="results" style="display: none;">
        <div class="results-header">Comparison Results</div>

        <div class="stats">
            <div class="stat-card stat-added">
                <div class="stat-icon">+</div>
                <div class="stat-value" id="addedCount">0</div>
                <div class="stat-label">Added</div>
            </div>
            <div class="stat-card stat-removed">
                <div class="stat-icon">−</div>
                <div class="stat-value" id="removedCount">0</div>
                <div class="stat-label">Removed</div>
            </div>
            <div class="stat-card stat-changed">
                <div class="stat-icon">±</div>
                <div class="stat-value" id="changedCount">0</div>
                <div class="stat-label">Changed</div>
            </div>
        </div>

        <div class="diff-container" id="diffContainer"></div>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script src="{{ url_for('static', filename='js/json-compare.js') }}"></script>
{% endblock %}

{% block about_title %}About JSON Comparison Tool{% endblock %}

{% block about_content %}
<h4>JSON Comparison Tool</h4>
<p>Compare two JSON objects and visualize their differences with color-coded highlighting.</p>

<h5>Key Features</h5>
<ul style="margin-left: 20px; line-height: 1.8;">
    <li><strong>Side-by-Side Comparison</strong> - View JSON objects in parallel for easy comparison</li>
    <li><strong>Visual Diff Highlighting</strong> - Color-coded additions (green), removals (red), and changes (yellow)</li>
    <li><strong>Format & Validate</strong> - Auto-format and validate JSON syntax with error detection</li>
    <li><strong>Sample Data</strong> - Load sample JSON for testing and demonstration</li>
    <li><strong>Statistics</strong> - Real-time count of added, removed, and changed fields</li>
    <li><strong>Editable Panels</strong> - Directly edit JSON in the browser</li>
    <li><strong>Nested Object Support</strong> - Handles complex nested JSON structures</li>
</ul>

<h5>How to Use</h5>
<ol style="margin-left: 20px; line-height: 1.8;">
    <li>Paste or type your first JSON object in the left panel (JSON 1)</li>
    <li>Paste or type your second JSON object in the right panel (JSON 2)</li>
    <li>Click "Compare" to see the differences</li>
    <li>Use "Format JSON" to auto-format and validate your JSON</li>
    <li>Click "Load Sample" to see an example comparison</li>
    <li>Review the color-coded differences and statistics</li>
</ol>

<h5>Color Legend</h5>
<ul style="margin-left: 20px; line-height: 1.8;">
    <li><strong style="color: #28a745;">Green</strong> - Fields added in JSON 2</li>
    <li><strong style="color: #dc3545;">Red</strong> - Fields removed in JSON 2</li>
    <li><strong style="color: #ffc107;">Yellow</strong> - Fields with changed values</li>
</ul>

<p style="margin-top: 15px;"><strong>Version:</strong> 1.0</p>
{% endblock %}